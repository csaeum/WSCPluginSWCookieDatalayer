{% sw_extends '@Storefront/storefront/layout/meta.html.twig' %}

{% block layout_head_meta_tags %}

    {# Einbindung von Cookie Consent START #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerCookieConsent') == "on" %}
        {% sw_include '@Storefront/storefront/wscTagManager/CookieConsent/CookieConsent.html.twig' %}
    {% endif %}
    {# Einbindung von Cookie Consent ENDE #}

    {# Add to Cart / Remove from Cart / Wishlist Event Tracking (auf ALLEN Seiten) #}
    {# Muss außerhalb der Whitelist sein, damit OffCanvas-Events überall funktionieren #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/add_to_cart.html.twig' %}
    {% endif %}

    {# DataLayer Event Tracking wird jetzt in base.html.twig geladen (Issue #22) #}
    {# Grund: base_body_script Block wird NACH PageLoadedEvents gerendert #}

    {# Einbindung von Matomo Allgemein START #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerMatomo') == "on" %}

        {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayerMatomo') == "on" %}
            {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/Matomo/Matomo.html.twig' %}
        {% endif %}

    {% endif %}
    {# Einbindung von Matomo Allgemein ENDE #}

    {# Einbindung von Google Allgemein START #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerGoogle') == "on" %}

        {# BUG FIX #4: Changed from wscTagManagerDataLayerMatomo to wscTagManagerDataLayerGoogle #}
        {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayerGoogle') == "on" %}
            {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/Google/Google.html.twig' %}
        {% endif %}

    {% endif %}
    {# Einbindung von Google Allgemein ENDE #}

    {# Einbindung von Custom Head Script START #}
    {% set customHeadScript = config('WscSwCookieDataLayer.config.wscCustomScriptHead') %}
    {% if customHeadScript %}
        {{ customHeadScript|raw }}
    {% endif %}
    {# Einbindung von Custom Head Script ENDE #}

    {{ parent() }}

{% endblock %}
