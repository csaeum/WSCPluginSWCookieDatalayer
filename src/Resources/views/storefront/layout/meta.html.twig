{% sw_extends '@Storefront/storefront/layout/meta.html.twig' %}

{% block layout_head_meta_tags %}

    {# Einbindung von Cookie Consent START #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerCookieConsent') == "on" %}
        {% sw_include '@Storefront/storefront/wscTagManager/CookieConsent/CookieConsent.html.twig' %}
    {% endif %}
    {# Einbindung von Cookie Consent ENDE #}

    {# Add to Cart / Remove from Cart / Wishlist / Select Item Event Tracking (auf ALLEN Seiten) #}
    {# Muss außerhalb der Whitelist sein, damit OffCanvas-Events überall funktionieren #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/add_to_cart.html.twig' %}
    {% endif %}

    {# Search Event Tracking (auf ALLEN Seiten) #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/search_tracking.html.twig' %}
    {% endif %}

    {# Promotion Event Tracking - view_promotion & select_promotion (auf ALLEN Seiten) #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/promotion_tracking.html.twig' %}
    {% endif %}

    {# Login Event Tracking mit SHA-256 Hashing (Issue #10) #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/login.html.twig' %}
    {% endif %}

    {# Sign Up Event Tracking mit SHA-256 Hashing (Issue #10) #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/sign_up.html.twig' %}
    {% endif %}

    {# Add to Compare Event Tracking (Issue #10) #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/add_to_compare.html.twig' %}
    {% endif %}

    {# Generate Lead Event Tracking (Issue #10) #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayer') == "on" %}
        {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/DataLayer/generate_lead.html.twig' %}
    {% endif %}

    {# DataLayer Event Tracking wird jetzt in base.html.twig geladen (Issue #22) #}
    {# Grund: base_body_script Block wird NACH PageLoadedEvents gerendert #}

    {# Einbindung von Matomo Allgemein START #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerMatomo') == "on" %}

        {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayerMatomo') == "on" %}
            {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/Matomo/Matomo.html.twig' %}
        {% endif %}

    {% endif %}
    {# Einbindung von Matomo Allgemein ENDE #}

    {# Einbindung von Google Allgemein START #}
    {% if config('WscSwCookieDataLayer.config.wscTagManagerGoogle') == "on" %}

        {# BUG FIX #4: Changed from wscTagManagerDataLayerMatomo to wscTagManagerDataLayerGoogle #}
        {% if config('WscSwCookieDataLayer.config.wscTagManagerDataLayerGoogle') == "on" %}
            {% sw_include '@WscSwCookieDataLayer/storefront/wscTagManager/Google/Google.html.twig' %}
        {% endif %}

    {% endif %}
    {# Einbindung von Google Allgemein ENDE #}

    {# Einbindung von Custom Head Script START #}
    {% set customHeadScript = config('WscSwCookieDataLayer.config.wscCustomScriptHead') %}
    {% if customHeadScript %}
        {{ customHeadScript|raw }}
    {% endif %}
    {# Einbindung von Custom Head Script ENDE #}

    {{ parent() }}

{% endblock %}
